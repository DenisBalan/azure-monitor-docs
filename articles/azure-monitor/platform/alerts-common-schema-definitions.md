---
title: Common alert schema defintions for Webhooks/Logic Apps/Azure Functions
description: Understanding the common alert schema definitions for Webhooks/Logic Apps/Azure Functions
author: anantr
services: azure-monitor
ms.service: azure-monitor
ms.topic: conceptual
ms.date: 03/14/2019
ms.author: anantr
ms.component: alerts
---


# Common alert schema definitions

This article describes the [common alert schema definitions](https://aka.ms/commonAlertSchemaDocs) for Webhooks/Logic Apps/Azure Functions. 

## Overview

Any alert instance describes **the resource that was affected** and **the cause of the alert**, and these are described in the common schema in the following sections:
* **Essentials**: A set of **standardized fields** which are common across all alert types, which describe **what resource** the alert is on along with additional common alert metadata (e.g. severity, description). 
* **Alert Context**: A set of fields which describe the **cause of the alert**, with fields that vary **based on the alert type**. For example, a metric alert would have fields like the metric name and metric value in the alert context, whereas an activity log alert would have information about the event that generated the alert. 

##### Sample alert payload
```json
{
  "schemaId": "azureMonitorCommonAlertSchema",
  "data": {
    "essentials": {
      "alertId": "/subscriptions/0de7dfbc-dc02-41b4-bc21-5073ec1141f6/providers/Microsoft.AlertsManagement/alerts/b9569717-bc32-442f-add5-83a997729330",
      "alertRule": "WCUS-R2-Gen2",
      "severity": "Sev3",
      "signalType": "Metric",
      "monitorCondition": "Resolved",
      "monitoringService": "Platform",
      "alertTargetIDs": [
        "/subscriptions/3f2d4487-b0fc-4125-8bd5-7ad17384221e/resourcegroups/pipelinealertrg/providers/microsoft.compute/virtualmachines/wcus-r2-gen2"
      ],
      "originAlertId": "3f2d4487-b0fc-4125-8bd5-7ad17384221e_PipeLineAlertRG_microsoft.insights_metricAlerts_WCUS-R2-Gen2_-117781227",
      "firedDateTime": "2019-03-22T13:58:24.3713213Z",
      "resolvedDateTime": "2019-03-22T14:03:16.2246313Z",
      "description": "",
      "essentialsVersion": "1.0",
      "alertContextVersion": "1.0"
    },
    "alertContext": {
      "properties": null,
      "conditionType": "SingleResourceMultipleMetricCriteria",
      "condition": {
        "windowSize": "PT5M",
        "allOf": [
          {
            "metricName": "Percentage CPU",
            "metricNamespace": "Microsoft.Compute/virtualMachines",
            "operator": "GreaterThan",
            "threshold": "25",
            "timeAggregation": "Average",
            "dimensions": [
              {
                "name": "ResourceId",
                "value": "3efad9dc-3d50-4eac-9c87-8b3fd6f97e4e"
              }
            ],
            "metricValue": 7.727
          }
        ]
      }
    }
  }
}
```

## 'Essentials' fields

| Field | Description|
|:---|:---|
| alertId | GUID uniquely identifying the alert instance. |
| alertRule | Name of the alert rule that generated the alert instance. |
| Severity | Severity of the alert. Possible values: Sev0, Sev1, Sev2, Sev3, Sev4 |
| signalType | Identifies the signal on which the alert rule was defined. Possible values: Metric, Log, Activity Log |
| monitorCondition | When an alert fires, the alert's monitor condition is set to 'Fired'. When the underlying condition that caused the alert to fire clears, the monitor condition is set to 'Resolved'.   |
| monitoringService | The monitoring service or solution which generated the alert. The fields for the alert context are dictated by the monitoring service. |
| alertTargetIds | List of the ARM ids all affected targets of an alert. For a log alert defined on a Log Analytics workspace or Application Insights instance, it is the respective workspace/application. |
| originAlertId | ID of the alert instance as generated by the monitoring service generating it. |
| firedDateTime | Date Time of when the alert instance was fired in UTC |
| resolvedDateTime | Date Time of when the monitor condition for the alert instance is set to 'Resolved' in UTC. Currently only applicable for metric alerts.|
| description | Description as defined in the alert rule |
|essentialsVersion| Version number for the essentials section.|
|alertContextVersion | Version number for the alertContext section |

##### Sample values
```json
{
  "essentials": {
    "alertId": "/subscriptions/0de7dfbc-dc02-41b4-bc21-5073ec1141f6/providers/Microsoft.AlertsManagement/alerts/b9569717-bc32-442f-add5-83a997729330",
    "alertRule": "Contoso IT Metric Alert",
    "severity": "Sev3",
    "signalType": "Metric",
    "monitorCondition": "Fired",
    "monitoringService": "Platform",
    "alertTargetIDs": [
      "/subscriptions/4b3bd59a-46ba-42c2-9a9b-4c6cebcd00d4/resourceGroups/aimon-rg/providers/Microsoft.Insights/components/ai-orion-int-fe"
    ],
    "originAlertId": "74ff8faa0c79db6084969cf7c72b0710e51aec70b4f332c719ab5307227a984f",
    "firedDateTime": "2019-03-26T05:25:50.4994863Z",
    "description": "Test Metric alert",
    "essentialsVersion": "1.0",
    "alertContextVersion": "1.0"
  }
}
```

## 'Alert Context' fields

### Metric Alerts

#### monitoringService = 'Platform'

##### Sample values
```json
{
  "alertContext": {
      "properties": null,
      "conditionType": "SingleResourceMultipleMetricCriteria",
      "condition": {
        "windowSize": "PT5M",
        "allOf": [
          {
            "metricName": "Percentage CPU",
            "metricNamespace": "Microsoft.Compute/virtualMachines",
            "operator": "GreaterThan",
            "threshold": "25",
            "timeAggregation": "Average",
            "dimensions": [
              {
                "name": "ResourceId",
                "value": "3efad9dc-3d50-4eac-9c87-8b3fd6f97e4e"
              }
            ],
            "metricValue": 31.1105
          }
        ],
        "windowStartTime": "2019-03-22T13:40:03.064Z",
        "windowEndTime": "2019-03-22T13:45:03.064Z"
      }
    }
}
```

### Log Alerts

#### monitoringService = 'Log Analytics'

##### Sample values
```json
{
  "alertContext": {
      "SearchQuery": "search * \n| where Type == \"Heartbeat\" \n| where Category == \"Direct Agent\" \n| where TimeGenerated > ago(30m) ",
      "SearchIntervalStartTimeUtc": "3/22/2019 1:36:31 PM",
      "SearchIntervalEndtimeUtc": "3/22/2019 1:51:31 PM",
      "ResultCount": 15,
      "LinkToSearchResults": "https://portal.azure.com#@72f988bf-86f1-41af-91ab-2d7cd011db47/blade/Microsoft_OperationsManagementSuite_Workspace/AnalyticsBlade/initiator/AnalyticsShareLinkToQuery/isQueryEditorVisible/true/scope/%7B%22resources%22%3A%5B%7B%22resourceId%22%3A%22%2Fsubscriptions%2F3f2d4487-b0fc-4125-8bd5-7ad17384221e%2FresourceGroups%2Fpipelinealertrg%2Fproviders%2FMicrosoft.OperationalInsights%2Fworkspaces%2FINC-OmsAlertRunner%22%7D%5D%7D/query/search%20%2A%20%0A%7C%20where%20Type%20%3D%3D%20%22Heartbeat%22%20%0A%7C%20where%20Category%20%3D%3D%20%22Direct%20Agent%22%20%0A%7C%20where%20TimeGenerated%20%3E%20%28datetime%282019-03-22T13%3A51%3A31.0000000%29%20-%2030m%29%20%20/isQuerybase64Compressed/false/timespanInIsoFormat/2019-03-22T13%3a36%3a31.0000000Z%2f2019-03-22T13%3a51%3a31.0000000Z",
      "SeverityDescription": "Warning",
      "WorkspaceId": "2a1f50a7-ef97-420c-9d14-938e77c2a929",
      "SearchIntervalDurationMin": "15",
      "AffectedConfigurationItems": [
        "INC-Gen2Alert"
      ],
      "SearchIntervalInMinutes": "15",
      "Threshold": 10000,
      "Operator": "Less Than"
    }
}
```

#### monitoringService = 'Application Insights'

##### Sample values
```json
{
  "alertContext": {
      "SearchQuery": "search *",
      "SearchIntervalStartTimeUtc": "3/22/2019 1:36:33 PM",
      "SearchIntervalEndtimeUtc": "3/22/2019 1:51:33 PM",
      "ResultCount": 0,
      "LinkToSearchResults": "https://portal.azure.com#@72f988bf-86f1-41af-91ab-2d7cd011db47/blade/Microsoft_OperationsManagementSuite_Workspace/AnalyticsBlade/initiator/AnalyticsShareLinkToQuery/isQueryEditorVisible/true/scope/%7B%22resources%22%3A%5B%7B%22resourceId%22%3A%22%2Fsubscriptions%2F3f2d4487-b0fc-4125-8bd5-7ad17384221e%2FresourceGroups%2FPipeLineAlertRG%2Fproviders%2Fmicrosoft.insights%2Fcomponents%2FWEU-AIRunner%22%7D%5D%7D/query/search%20%2A/isQuerybase64Compressed/false/timespanInIsoFormat/2019-03-22T13%3a36%3a33.0000000Z%2f2019-03-22T13%3a51%3a33.0000000Z",
      "SearchIntervalDurationMin": "15",
      "SearchIntervalInMinutes": "15",
      "Threshold": 10000,
      "Operator": "Less Than",
      "ApplicationId": "8e20151d-75b2-4d66-b965-153fb69d65a6"
    }
}
```

### Activity Log Alerts

#### monitoringService = 'Activity Log - Administrative'

##### Sample values
```json
{
  "alertContext": {
      "authorization": {
        "action": "Microsoft.Compute/virtualMachines/restart/action",
        "scope": "/subscriptions/3f2d4487-b0fc-4125-8bd5-7ad17384221e/resourceGroups/PipeLineAlertRG/providers/Microsoft.Compute/virtualMachines/WCUS-R2-ActLog"
      },
      "channels": "Operation",
      "claims": "{\"aud\":\"https://management.core.windows.net/\",\"iss\":\"https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/\",\"iat\":\"1553260826\",\"nbf\":\"1553260826\",\"exp\":\"1553264726\",\"aio\":\"42JgYNjdt+rr+3j/dx68v018XhuFAwA=\",\"appid\":\"e9a02282-074f-45cf-93b0-50568e0e7e50\",\"appidacr\":\"2\",\"http://schemas.microsoft.com/identity/claims/identityprovider\":\"https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/\",\"http://schemas.microsoft.com/identity/claims/objectidentifier\":\"9778283b-b94c-4ac6-8a41-d5b493d03aa3\",\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier\":\"9778283b-b94c-4ac6-8a41-d5b493d03aa3\",\"http://schemas.microsoft.com/identity/claims/tenantid\":\"72f988bf-86f1-41af-91ab-2d7cd011db47\",\"uti\":\"v5wYC9t9ekuA2rkZSVZbAA\",\"ver\":\"1.0\"}",
      "caller": "9778283b-b94c-4ac6-8a41-d5b493d03aa3",
      "correlationId": "8ee9c32a-92a1-4a8f-989c-b0ba09292a91",
      "eventSource": "Administrative",
      "eventTimestamp": "2019-03-22T13:56:31.2917159+00:00",
      "eventDataId": "161fda7e-1cb4-4bc5-9c90-857c55a8f57b",
      "level": "Informational",
      "operationName": "Microsoft.Compute/virtualMachines/restart/action",
      "operationId": "310db69b-690f-436b-b740-6103ab6b0cba",
      "status": "Succeeded",
      "subStatus": "",
      "submissionTimestamp": "2019-03-22T13:56:54.067593+00:00"
    }
}

### Smart Detector Alerts

##### Sample values
```json
{"alertContext": {
      "BaselineFailureRate": 0,
      "BaselineTimeSpanInMilliseconds": 603600000,
      "CreatedOn": "2019-03-23T00:00:37.9143949Z",
      "CustomEmailUri": "/?appInsightsExtension_OverrideSettings=shouldFetchNrtAlertsFromAms%3Atrue#blade/AppInsightsExtension/ProactiveDetectionFeedBlade/ComponentId/%7B%22SubscriptionId%22:%224b3bd59a-46ba-42c2-9a9b-4c6cebcd00d4%22,%22ResourceGroup%22:%22aimon-rg%22,%22Name%22:%22ai-orion-int-fe%22%7D/SelectedItemGroup/90f3d128-82ce-4124-9075-d0ee074ccb87/SelectedItemTime/2019-03-22T23:58:00Z/InsightType/5",
      "DetectionType": "RequestFailureSpike",
      "GroupId": "90f3d128-82ce-4124-9075-d0ee074ccb87",
      "ImpactedUserCount": 0,
      "MultipleValuePredicates": [],
      "OneClassCoverage": 0.603,
      "OneClassTitle": "60% of the failed requests had these characteristics:",
      "Predicates": {
        "request.name": [
          "POST /DiagnosticService.svc/ruleinstances/refresh"
        ],
        "request.urlHost": [
          "orion-int.aisvc-int.visualstudio.com"
        ],
        "context.device.roleInstance": [
          "DTA.Engine.FrontEnd_IN_0"
        ],
        "_MS.ProcessedByMetricExtractors": [
          "(Name:'Requests', Ver:'1.0')"
        ],
        "request.responseCode": [
          "500"
        ]
      },
      "SpikeEndTime": "2019-03-22T23:58:00Z",
      "SpikeFailureCount": 23198,
      "SpikeFailureRate": 0.012,
      "SpikeStartTime": "2019-03-22T23:38:00Z",
      "SpikeTimeSpanInMilliseconds": 1200000,
      "SpikeTotalCount": 1856020,
      "DetectionSummary": "An abnormal rise in failed request rate",
      "FormattedOccurenceTime": "2019-03-22T23:58:00Z",
      "DetectedFailureRate": "1.2% (23,198/1,856,020 requests)",
      "NormalFailureRate": "0.0% over the last 7 days",
      "FailureRateChart": [
        [
          "2019-03-22T23:20:00Z",
          0.52
        ],
        [
          "2019-03-22T23:00:00Z",
          0.21
        ],
        [
          "2019-03-22T16:40:00Z",
          0
        ],
        [
          "2019-03-22T17:00:00Z",
          0
        ],
        [
          "2019-03-22T17:20:00Z",
          0
        ],
        [
          "2019-03-22T17:40:00Z",
          0
        ],
        [
          "2019-03-22T18:00:00Z",
          0
        ],
        [
          "2019-03-22T18:20:00Z",
          0
        ],
        [
          "2019-03-22T18:40:00Z",
          0
        ],
        [
          "2019-03-22T19:00:00Z",
          0
        ],
        [
          "2019-03-22T19:20:00Z",
          0
        ],
        [
          "2019-03-22T19:40:00Z",
          0
        ],
        [
          "2019-03-22T20:00:00Z",
          0
        ],
        [
          "2019-03-22T20:20:00Z",
          0
        ],
        [
          "2019-03-22T20:40:00Z",
          0
        ],
        [
          "2019-03-22T21:00:00Z",
          0
        ],
        [
          "2019-03-22T21:20:00Z",
          0
        ],
        [
          "2019-03-22T21:40:00Z",
          0
        ],
        [
          "2019-03-22T22:00:00Z",
          0
        ],
        [
          "2019-03-22T22:20:00Z",
          0
        ],
        [
          "2019-03-22T22:40:00Z",
          0
        ],
        [
          "2019-03-22T11:20:00Z",
          0
        ],
        [
          "2019-03-22T11:40:00Z",
          0
        ],
        [
          "2019-03-22T12:00:00Z",
          0.07
        ],
        [
          "2019-03-22T12:20:00Z",
          0
        ],
        [
          "2019-03-22T12:40:00Z",
          0
        ],
        [
          "2019-03-22T13:00:00Z",
          0
        ],
        [
          "2019-03-22T13:20:00Z",
          0
        ],
        [
          "2019-03-22T13:40:00Z",
          0
        ],
        [
          "2019-03-22T14:00:00Z",
          0
        ],
        [
          "2019-03-22T14:20:00Z",
          0
        ],
        [
          "2019-03-22T14:40:00Z",
          0
        ],
        [
          "2019-03-22T15:00:00Z",
          0
        ],
        [
          "2019-03-22T15:20:00Z",
          0
        ],
        [
          "2019-03-22T15:40:00Z",
          0
        ],
        [
          "2019-03-22T16:00:00Z",
          0
        ],
        [
          "2019-03-22T16:20:00Z",
          0
        ],
        [
          "2019-03-22T23:38:00Z",
          1.2
        ]
      ],
      "OneClassTable": [
        {
          "Name": "Response code",
          "Value": "500"
        },
        {
          "Name": "Request name",
          "Value": "POST /DiagnosticService.svc/ruleinstances/refresh"
        },
        {
          "Name": "Request URL host",
          "Value": "orion-int.aisvc-int.visualstudio.com"
        },
        {
          "Name": "Role instance",
          "Value": "DTA.Engine.FrontEnd_IN_0"
        },
        {
          "Name": "_MS.ProcessedByMetricExtractors",
          "Value": "(Name:'Requests', Ver:'1.0')"
        }
      ],
      "LinksTable": [
        {
          "Link": "<a href=\"https://portal.azure.com/?appInsightsExtension_OverrideSettings=shouldFetchNrtAlertsFromAms:true#blade/AppInsightsExtension/ProactiveDetectionFeedBlade/ComponentId/{\"SubscriptionId\":\"4b3bd59a-46ba-42c2-9a9b-4c6cebcd00d4\",\"ResourceGroup\":\"aimon-rg\",\"Name\":\"ai-orion-int-fe\"}/SelectedItemGroup/90f3d128-82ce-4124-9075-d0ee074ccb87/SelectedItemTime/2019-03-22T23:58:00Z/InsightType/5\" target=\"_blank\">View full details in Application Insights</a>"
        }
      ],
      "SmartDetectorId": "FailureAnomaliesDetector",
      "SmartDetectorName": "Failure Anomalies",
      "AnalysisTimestamp": "2019-03-23T00:00:47.8838919Z"
    }
}
```


## Next steps

- [Common schema definitions for different alert types](https://aka.ms/commonAlertSchemaDefinitions)
- [How to best integrate with the common alert schema](https://aka.ms/commonAlertSchemaIntegrations)


